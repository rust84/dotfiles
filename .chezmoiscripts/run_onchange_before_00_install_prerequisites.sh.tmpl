{{- if (eq .chezmoi.osRelease.idLike "fedora") -}}
#!{{ lookPath "bash" }}

set -eufo pipefail

# Define colors
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m' # No Color

# Function to print a message with a color
print_msg() {
	local msg=$1
	local color=$2
	echo -e "${color}${msg}${NC}"
}

print_msg "Package installs ========================================================" $YELLOW

# Install repos
sudo -E dnf install -y https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm

sudo -E dnf install -y dnf-utils

echo "updating packages"
{{   if ne .chezmoi.username "root" -}}
sudo -E dnf update
sudo -E dnf upgrade -y
{{   else -}}
dnf update
dnf upgrade -y
{{   end -}}

echo "Installing global linux apps (native + WSL)"
sudo -E dnf install -y \
  ack \
  curl \
  cronie \
  docker \
  fish \
  git \
  htop \
  rpmfusion-nonfree-release-tainted \
  dnf-plugins-core \
  nfs-utils \
  nmap \
  python-pip \
  syncthing \
  tree \
  unzip \
  util-linux-user \
  wget \
  make \
  cargo \
  gcc-c++ \
  libstdc++-devel \
  socat \
  gcc \
  python-devel \
  thefuck \
  ansible-lint

echo -e "\033[0;32m>>>>> Finish Setting Up Arch Linux Packages <<<<<\033[0m"
echo -e "\033[0;32m>>>>> Add user to docker group (Req. sudo) <<<<<\033[0m"
sudo usermod -aG docker $USER
echo -e "\033[0;32m>>>>> Logout/Login required to catch new user permissions  <<<<<\033[0m"
{{  end -}}